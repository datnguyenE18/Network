# **Thực hành**

**Task:** Xây dựng hệ thống dịch vụ có cân bằng tải (load balancing) và tính khả dụng cao (highly available) sử dụng HAProxy + Keepalived. Tất cả được Deploy bằng Docker

**Keywords:** HAProxy, Keepalived, Docker, Docker-compose, nginx, server, Load Balance,  highly available
***
**Hệ thống dự kiến:**

- Có 2 máy chủ web là: **web1** và **web2**. Sử dụng Nginx làm máy chủ web (đáp ứng cả HTTP và HTTPS)
- Trước máy chủ web có 2 load balancers: **bl1** và **bl2**, 
  - Hai HAProxy kết nối với hai máy chủ web để đảm bảo hiệu năng. 

  - Bên cạnh đó keepalived được cài đặt để kiểm tra xem HAProxy có khả dụng không và đặt 1 IP ảo để khách sử dụng. Định nghĩa **bl1** là node chính (master) còn **bl2** là node phụ (backup) để hỗ trợ chuyển đổi dự phòng HAProxy 

![viettel drawio](https://user-images.githubusercontent.com/43572616/177694292-4e5d2130-1722-4aa2-859f-58d371a5c476.png)

***
**Tạo Network:**
`docker network create viettel`

![image](https://user-images.githubusercontent.com/43572616/177744190-a66bd1ff-86d0-4201-8f60-ea0d0f9f12b2.png)

***
Tạo 2 Ngnix WebServer:
